<?xml version="1.0" encoding="UTF-8"?>
<!--
  Created by IntelliJ IDEA.
  User: Сергей
  Date: 04.08.2015
  Time: 22:00
-->
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://java.sun.com/jsf/html">

<h:head>
    <title>#{msg.admin_console}</title>
    <h:outputScript name="jquery/jquery.js" library="primefaces"/>
    <h:outputStylesheet name="admin-console-style.css" library="css"/>
</h:head>

<h:body>
    <div class="container">

        <h:form>

            <p:toolbar>
                <f:facet name="left">

                </f:facet>

                <f:facet name="right">
                    <p:commandButton action="#{navigationBean.showIndex}" value="#{msg.to_the_shop}" icon="ui-icon-close" ajax="false"/>
                    <p:commandButton action="#{authentication.doLogout}" value="#{msg.logout}" icon="ui-icon-extlink" ajax="false"/>
                </f:facet>

            </p:toolbar>
        </h:form>


            <h:form id="main_form">
                <p:growl id="messages" showDetail="false" escape="false"/>
                <p:treeTable id="admin_table"  value="#{adminTableController.root}" var="g" selectionMode="single"
                             selection="#{adminTableController.selectedNode}" resizableColumns="true" style="margin-top:0">
                    <f:facet name="header">
                        #{msg.gooods_manager}
                    </f:facet>
                    <p:column headerText="#{msg.name}">
                        <h:outputText value="#{g.name}" />
                    </p:column>
                    <p:column headerText="#{msg.description}">
                        <h:outputText value="#{g.description}" />
                    </p:column>

                    <p:column style="width:24px">
                        <p:commandLink action="#{goodsController.showGoodsDetails(g.id)}" title="View Detail" styleClass="ui-icon ui-icon-search"/>
                    </p:column>
                </p:treeTable>


                <p:commandButton styleClass="table_button" value="#{msg.add_goods}"  icon="ui-icon-plus"
                                 action="#{adminTableController.addGoodsDialog}">
                    <p:ajax event="dialogReturn" listener="#{adminTableController.updateTable('goods')}" update="admin_table messages"/>
                </p:commandButton>
                <p:commandButton styleClass="table_button" value="#{msg.add_group}" icon="ui-icon-plusthick"
                                 actionListener="#{adminTableController.addGroupDialog}">
                    <p:ajax event="dialogReturn" listener="#{adminTableController.updateTable('group')}" update="admin_table messages"/>
                </p:commandButton>
                <p:commandButton styleClass="table_button" value="#{msg.edit}" update="messages" icon="ui-icon-pencil"
                                 actionListener="#{adminTableController.editDialog}">
                    <p:ajax event="dialogReturn" listener="#{adminTableController.updateTable('update')}" update="admin_table messages"/>
                </p:commandButton>
                <p:commandButton styleClass="table_button" value="#{msg.change_Amount}" update="messages" icon="ui-icon-transfer-e-w"
                                 actionListener="#{adminTableController.amountDialog}">
                    <p:ajax event="dialogReturn" listener="#{adminTableController.updateTable('update')}" update="admin_table messages"/>
                </p:commandButton>
                <h:form>
                    <p:commandButton styleClass="table_button" value="#{msg.delete}" icon="ui-icon-trash"
                                     actionListener="#{adminTableController.deleteItem}" update="@([id$=messages]) @([id$=admin_table])"
                                     action="#{adminTableController.updateTable('')}" >
                        <p:confirm message="#{msg.delete_item}" header="#{msg.confirmation}" icon="ui-icon-alert"/>

                    </p:commandButton>
                    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                        <p:commandButton value="#{msg.yes}" type="button" styleClass="ui-confirmdialog-yes"
                                         icon="ui-icon-check">
                        </p:commandButton>
                        <p:commandButton value="#{msg.no}" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                    </p:confirmDialog>
                </h:form>


            </h:form>


    </div>
</h:body>

</html>